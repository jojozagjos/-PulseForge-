
:root{--bg:#0A0C10;--panel:#12151d;--text:#e7f0ff;--muted:#9bb0c9;--neon:#25F4EE;--accent:#FF2E88;--violet:#8A5CFF;--lime:#C8FF4D;}
*{box-sizing:border-box}html,body{height:100%;margin:0;background:var(--bg);color:var(--text);font-family:Inter,system-ui,Arial,sans-serif}
#ui-root{position:relative;height:100%}.screen{position:absolute;inset:0;display:none;padding:24px}.screen.active{display:block}
.logo{font-size:48px;letter-spacing:2px;margin-top:8vh;text-align:center}.logo span{color:var(--neon)}
.menu{display:flex;flex-direction:column;gap:16px;align-items:center;margin-top:40px}
button{padding:14px 20px;border-radius:14px;border:1px solid transparent;background:var(--panel);color:var(--text);font-size:16px;cursor:pointer;transition:transform .06s ease,box-shadow .2s ease,border-color .2s ease}
button:hover{transform:translateY(-1px);box-shadow:0 8px 24px rgba(37,244,238,.15);border-color:rgba(37,244,238,.35)}
button.primary{background:linear-gradient(180deg,rgba(37,244,238,.15),rgba(37,244,238,.05));border-color:rgba(37,244,238,.5)}
button.secondary{background:linear-gradient(180deg,rgba(138,92,255,.15),rgba(138,92,255,.05));border-color:rgba(138,92,255,.5)}
button.tertiary{background:linear-gradient(180deg,rgba(255,46,136,.15),rgba(255,46,136,.05));border-color:rgba(255,46,136,.5)}
button.ghost{background:transparent;border-color:#2a3142}.footer{position:absolute;bottom:16px;left:0;right:0;text-align:center;color:var(--muted)}
h1{margin-top:0}.panel{background:var(--panel);border:1px solid #2a3142;border-radius:16px;padding:16px;box-shadow:inset 0 0 0 1px rgba(255,255,255,.02)}.panel.small{max-width:520px}
.track-list{display:flex;gap:16px;flex-wrap:wrap}.track{width:220px;background:var(--panel);border:1px solid #2a3142;border-radius:16px;overflow:hidden;cursor:pointer;transition:transform .06s ease,border-color .2s ease}
.track:hover{transform:translateY(-2px);border-color:rgba(37,244,238,.5)}.track .cover{height:120px;background:#0d111a center/cover no-repeat}.track .meta{padding:10px;font-size:14px;color:var(--muted)}
.row{display:flex;gap:12px;align-items:center;margin-top:16px}label{display:flex;flex-direction:column;gap:6px;margin:8px 0;color:var(--muted)}
input,select{background:#0f1420;border:1px solid #2a3142;color:var(--text);border-radius:10px;padding:10px}
#game-canvas{position:absolute;inset:0;width:100%;height:100%;display:none}.hud{position:absolute;inset:0;pointer-events:none;padding:16px;display:flex}.hud.hidden{display:none}
.hud .left{position:absolute;left:16px;top:16px}.hud .right{position:absolute;right:16px;top:16px}.combo{font-size:28px;color:var(--neon)}.acc{font-size:14px;color:var(--muted)}.score{font-size:28px;color:#fff}
.judgment{position:absolute;left:50%;top:70%;transform:translate(-50%,-50%);font-size:36px;opacity:0;transition:opacity .1s ease,transform .1s ease}.judgment.show{opacity:1;transform:translate(-50%,-62%)}
#screen-results .panel{max-width:680px}.results-row{display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px dashed #2a3142}.results-row:last-child{border-bottom:none}

/* Editor tool buttons default look */
#screen-editor [data-tool] {
  background: #1e2433;
  border: 1px solid #2a3142;
  color: #eee;
  padding: 4px 10px;
  border-radius: 6px;
  font-size: 0.9em;
  cursor: pointer;
}
#screen-editor [data-tool]:hover {
  background: #2a3142;
}

/* --- Editor layout --- */
.editor-grid {
  display: grid;
  grid-template-rows: auto 1fr;
  height: 100vh; /* full screen */
  overflow: hidden;
}

.editor-header {
  display: flex; align-items: center; justify-content: space-between;
  gap: 12px; padding: 8px 12px;
  border-bottom: 1px solid #2a3142; background: #0f1420;
}
.editor-header .left { display:flex; align-items:center; gap:10px; }
.editor-header h1 { font-size: 18px; margin: 0; }

.editor-split {
  position: relative;
  display: grid;
  grid-template-columns: var(--sidebar-w, 360px) 8px 1fr;
  height: 100%;
  min-height: 0;
}

#ed-sidebar {
  min-width: 260px;
  background: #0b1019;
  border-right: 1px solid #2a3142;
  display: flex;
  flex-direction: column;
  overflow: hidden; /* tabs fixed, panels scroll */
}
#ed-sidebar .tabs {
  display:flex; gap:6px; padding:8px; border-bottom:1px solid #1e293b; background:#0f1420;
  position: sticky; top: 0; z-index: 1;
}
#ed-sidebar .tab {
  padding:6px 10px; border:1px solid #2a3142; background:#1b2232; color:#e8eefc; border-radius:8px; cursor:pointer;
}
#ed-sidebar .tab.active { background:#2a3142; border-color:#3fc1c9; }
#ed-sidebar .panels { padding:10px; overflow:auto; }
#ed-sidebar .panel { border:1px solid #2a3142; border-radius:10px; padding:10px; background:#0f1420; }
#ed-sidebar .tab-pane { display:none; }
#ed-sidebar .tab-pane.active { display:block; }
#ed-sidebar .sep { border:0; border-top:1px solid #1e293b; margin:10px 0; }
.muted { color:#9aa9c3; }
.tiny { font-size: 12px; }

#ed-gutter {
  cursor: col-resize;
  background: linear-gradient(#162031, #0f1420);
  border-right: 1px solid #1e293b;
}

#ed-stage {
  display:flex; flex-direction:column; min-width: 0; /* let canvas shrink */
  background:#0a0c10;
}
#ed-stage .stage-top {
  padding:8px 12px; border-bottom:1px solid #1e293b; background:#0f1420;
}
#ed-stage .stage-canvas-wrap {
  position: relative;
  height: calc(100vh - 56px - 44px); /* full height minus header (approx) and scrub row */
  /* If your header height differs, tweak the constants or convert to CSS var. */
}
#editor-canvas {
  width: 100%;
  height: 100%;
  display:block;
}

#lb-table { width: 100%; table-layout: fixed; border-collapse: collapse; }
#lb-table th, #lb-table td { padding: 8px 10px; }
#lb-table .num { text-align: right; font-variant-numeric: tabular-nums; white-space: nowrap; }

/* make sure the bar exists and starts hidden */
#latency-flash {
  height: 8px;
  border-radius: 4px;
  background: #25f4ee;         /* your blue */
  opacity: 0;
  will-change: opacity;
}

/* one-shot fade-out */
@keyframes pfFlashBeat { from { opacity: 1 } to { opacity: 0 } }
#latency-flash.pf-flash {
  animation: pfFlashBeat 140ms ease-out;
}

/* Better readability + compact responsive grid */
#ed-help.shortcut-cheatsheet { margin-top: 6px; }

#ed-help.shortcut-cheatsheet ul {
  margin: 6px 0 0;
  padding: 0;                         /* remove default left padding */
  list-style: none;                   /* remove bullets */
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
  gap: 6px 16px;                      /* a touch more breathing room */
  line-height: 1.35;
}

#ed-help.shortcut-cheatsheet li {
  min-height: 24px;
}

#ed-help.shortcut-cheatsheet kbd {
  display: inline-block;
  padding: 0 6px;
  border: 1px solid #2a3142;
  border-radius: 4px;
  background: #111725;
  font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
  font-size: 12px;
  line-height: 20px;
  vertical-align: baseline;
}

#ed-help.shortcut-cheatsheet .muted { opacity: 0.9; }
